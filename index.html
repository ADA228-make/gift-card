<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Prix Cartes Cadeaux</title>
  <style>
    body {
      background-color: #121212;
      color: #f1f1f1;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #00eaff;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }
    th, td {
      padding: 12px;
      border-bottom: 1px solid #333;
      text-align: center;
    }
    th {
      background-color: #222;
    }
    .note {
      margin-top: 20px;
      font-size: 0.9em;
      color: #aaa;
    }
  </style>
</head>
<body>

<h1>ðŸ’³ Prix cartes cadeaux + IPTV</h1>
<table>
  <thead>
    <tr>
      <th>Carte</th>
      <th>Frais</th>
      <th>Total (â‚¬/$)</th>
      <th>Montant XOF</th>
      <th>Marge</th>
      <th>Prix client</th>
    </tr>
  </thead>
  <tbody id="table-body">
    <!-- Lignes gÃ©nÃ©rÃ©es en JS -->
  </tbody>
</table>

<p class="note">ðŸ’¡ Les prix sont automatiquement mis Ã  jour avec les taux de change EUR/XOF et USD/XOF.</p>

<script>
const lignes = [
  { carte: "10 â‚¬", frais: 0.99, montant: 10, devise: "EUR", taux: "eurToXof", marge: 1500 },
  { carte: "10 $", frais: 0.99, montant: 10, devise: "USD", taux: "usdToXof", marge: 1500 },
  { carte: "20 â‚¬", frais: 1.19, montant: 20, devise: "EUR", taux: "eurToXof", marge: 2500 },
  { carte: "20 $", frais: 1.19, montant: 20, devise: "USD", taux: "usdToXof", marge: 2500 },
  { carte: "50 â‚¬", frais: 1.49, montant: 50, devise: "EUR", taux: "eurToXof", marge: 3000 },
  { carte: "50 $", frais: 1.49, montant: 50, devise: "USD", taux: "usdToXof", marge: 3000 },
  { carte: "60 â‚¬", frais: 1.59, montant: 60, devise: "EUR", taux: "eurToXof", marge: 3500 },
  { carte: "80 $", frais: 1.79, montant: 80, devise: "USD", taux: "usdToXof", marge: 3500 },
  { carte: "100 â‚¬", frais: 1.99, montant: 100, devise: "EUR", taux: "eurToXof", marge: 4000 },
  { carte: "100 $", frais: 1.99, montant: 100, devise: "USD", taux: "usdToXof", marge: 4000 },
  { carte: "150 â‚¬", frais: 2.49, montant: 150, devise: "EUR", taux: "eurToXof", marge: 5000 },
  { carte: "150 $", frais: 2.49, montant: 150, devise: "USD", taux: "usdToXof", marge: 5000 },
  { carte: "200 â‚¬", frais: 2.99, montant: 200, devise: "EUR", taux: "eurToXof", marge: 6000 },
  { carte: "200 $", frais: 2.99, montant: 200, devise: "USD", taux: "usdToXof", marge: 6000 },
  { carte: "250 â‚¬", frais: 3.49, montant: 250, devise: "EUR", taux: "eurToXof", marge: 7000 },
  { carte: "250 $", frais: 3.49, montant: 250, devise: "USD", taux: "usdToXof", marge: 7000 },
];

function formatXOF(value) {
  return Math.round(value).toLocaleString('fr-FR') + " FCFA";
}

async function afficherTableau() {
  try {
    const res = await fetch("https://api.exchangerate.host/latest?base=EUR&symbols=XOF,USD");
    const taux = await res.json();
    const eurToXof = taux.rates.XOF;
    const usdToXof = taux.rates.XOF / taux.rates.USD;

    const tbody = document.getElementById("table-body");
    tbody.innerHTML = "";

    lignes.forEach(ligne => {
      const totalDevise = ligne.montant + ligne.frais;
      const tauxUtilise = ligne.taux === "eurToXof" ? eurToXof : usdToXof;
      const montantXof = totalDevise * tauxUtilise;
      const prixFinal = montantXof + ligne.marge;

      const row = `
        <tr>
          <td>${ligne.carte}</td>
          <td>${ligne.frais.toFixed(2)}</td>
          <td>${totalDevise.toFixed(2)} ${ligne.devise}</td>
          <td>${formatXOF(montantXof)}</td>
          <td>${ligne.marge.toLocaleString('fr-FR')} FCFA</td>
          <td><strong>${formatXOF(prixFinal)}</strong></td>
        </tr>
      `;
      tbody.innerHTML += row;
    });
  } catch (err) {
    alert("Erreur lors du chargement des taux. VÃ©rifie ta connexion.");
  }
}

afficherTableau();
</script>

</body>
</html>

